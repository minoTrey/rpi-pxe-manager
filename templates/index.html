<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPI PXE Manager</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Raspberry Pi PXE Manager</h1>
            <div class="server-status">
                <span id="server-ip">μ„λ²„ IP: ν™•μΈμ¤‘...</span>
                <span id="dhcp-range">DHCP λ²”μ„: ν™•μΈμ¤‘...</span>
                <span id="interface">μΈν„°νμ΄μ¤: ν™•μΈμ¤‘...</span>
            </div>
        </header>

        <div class="main-content">
            <div class="panel services-panel">
                <h2>μ„λΉ„μ¤ μƒνƒ</h2>
                <div class="service-status">
                    <div class="service-item">
                        <span>DNSMASQ</span>
                        <span class="status-indicator" id="dnsmasq-status"></span>
                    </div>
                    <div class="service-item">
                        <span>NFS Server</span>
                        <span class="status-indicator" id="nfs-status"></span>
                    </div>
                </div>
                
                <h3>μ‹μ¤ν… λ¦¬μ†μ¤</h3>
                <div class="resource-stats">
                    <div class="stat-item">
                        <label>CPU:</label>
                        <div class="progress-bar">
                            <div class="progress-fill" id="cpu-usage"></div>
                        </div>
                        <span id="cpu-percent">0%</span>
                    </div>
                    <div class="stat-item">
                        <label>λ©”λ¨λ¦¬:</label>
                        <div class="progress-bar">
                            <div class="progress-fill" id="memory-usage"></div>
                        </div>
                        <span id="memory-percent">0%</span>
                    </div>
                    <div class="stat-item">
                        <label>λ””μ¤ν¬:</label>
                        <div class="progress-bar">
                            <div class="progress-fill" id="disk-usage"></div>
                        </div>
                        <span id="disk-percent">0%</span>
                    </div>
                </div>
            </div>

            <div class="panel actions-panel">
                <h2>μ„λ²„ μ„¤μ •</h2>
                <button id="setup-server-btn" class="primary-btn">
                    <span class="btn-icon">β™οΈ</span>
                    μ„λ²„ μ΄κΈ° μ„¤μ •
                </button>
                <button id="config-btn" class="secondary-btn">
                    <span class="btn-icon">π“</span>
                    μ„¤μ • λ³€κ²½
                </button>
                
                <h2>ν΄λΌμ΄μ–ΈνΈ κ΄€λ¦¬</h2>
                <button id="setup-client-btn" class="primary-btn">
                    <span class="btn-icon">β•</span>
                    μ²« ν΄λΌμ΄μ–ΈνΈ μ„¤μ •
                </button>
                <button id="create-client-btn" class="primary-btn">
                    <span class="btn-icon">π“‹</span>
                    μƒ ν΄λΌμ΄μ–ΈνΈ μ¶”κ°€
                </button>
                
                <h2>λ΅κ·Έ ν™•μΈ</h2>
                <button id="view-dnsmasq-log" class="secondary-btn">
                    <span class="btn-icon">π“„</span>
                    DNSMASQ λ΅κ·Έ
                </button>
                <button id="view-nfs-log" class="secondary-btn">
                    <span class="btn-icon">π“„</span>
                    NFS λ΅κ·Έ
                </button>
            </div>

            <div class="panel clients-panel">
                <h2>μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈ</h2>
                <div id="clients-list" class="clients-list">
                    <div class="loading">ν΄λΌμ΄μ–ΈνΈ μ •λ³΄ λ΅λ”©μ¤‘...</div>
                </div>
            </div>
        </div>

        <div class="console-panel">
            <div class="console-header">
                <h3>μ‹¤ν–‰ λ΅κ·Έ</h3>
                <button id="clear-console" class="small-btn">μ§€μ°κΈ°</button>
            </div>
            <div id="console-output" class="console-output"></div>
        </div>
    </div>

    <!-- μ²« ν΄λΌμ΄μ–ΈνΈ μ„¤μ • λ¨λ‹¬ -->
    <div id="setup-client-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>μ²« ν΄λΌμ΄μ–ΈνΈ μ„¤μ •</h2>
            <form id="setup-client-form">
                <div class="form-group">
                    <label>Raspberry Pi μ‹λ¦¬μ–Ό λ²νΈ:</label>
                    <input type="text" id="client-serial" required placeholder="μ: 10000000abcdef12">
                    <small>SDμΉ΄λ“μ /boot/serial νμΌμ—μ„ ν™•μΈ κ°€λ¥</small>
                </div>
                <div class="form-group">
                    <label>SD μΉ΄λ“ μ„ νƒ:</label>
                    <select id="sd-card-select" required>
                        <option value="">SD μΉ΄λ“ κ²€μƒ‰μ¤‘...</option>
                    </select>
                    <button type="button" id="refresh-sdcards" class="small-btn">μƒλ΅κ³ μΉ¨</button>
                </div>
                <div class="form-actions">
                    <button type="submit" class="primary-btn">μ„¤μ • μ‹μ‘</button>
                    <button type="button" class="secondary-btn cancel-btn">μ·¨μ†</button>
                </div>
            </form>
        </div>
    </div>

    <!-- μƒ ν΄λΌμ΄μ–ΈνΈ μ¶”κ°€ λ¨λ‹¬ -->
    <div id="create-client-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>μƒ ν΄λΌμ΄μ–ΈνΈ μ¶”κ°€</h2>
            <form id="create-client-form">
                <div class="form-group">
                    <label>λ³µμ‚¬ν•  μ†μ¤ ν΄λΌμ΄μ–ΈνΈ:</label>
                    <select id="source-client-select" required>
                        <option value="">ν΄λΌμ΄μ–ΈνΈ μ„ νƒ...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>μƒ Raspberry Pi μ‹λ¦¬μ–Ό λ²νΈ:</label>
                    <input type="text" id="new-client-serial" required placeholder="μ: 10000000abcdef13">
                </div>
                <div class="form-group">
                    <label>MAC μ£Όμ† (μ„ νƒμ‚¬ν•­):</label>
                    <input type="text" id="new-client-mac" placeholder="μ: dc:a6:32:xx:xx:xx">
                    <small>DHCP μμ•½μ„ μ›ν•λ” κ²½μ°μ—λ§ μ…λ ¥</small>
                </div>
                <div class="form-actions">
                    <button type="submit" class="primary-btn">ν΄λΌμ΄μ–ΈνΈ μƒμ„±</button>
                    <button type="button" class="secondary-btn cancel-btn">μ·¨μ†</button>
                </div>
            </form>
        </div>
    </div>

    <!-- μ„¤μ • λ³€κ²½ λ¨λ‹¬ -->
    <div id="config-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>μ„λ²„ μ„¤μ •</h2>
            <form id="config-form">
                <div class="form-group">
                    <label>μ„λ²„ IP μ£Όμ†:</label>
                    <input type="text" id="config-server-ip" required>
                </div>
                <div class="form-group">
                    <label>DHCP μ‹μ‘ μ£Όμ†:</label>
                    <input type="text" id="config-dhcp-start" required>
                </div>
                <div class="form-group">
                    <label>DHCP μΆ…λ£ μ£Όμ†:</label>
                    <input type="text" id="config-dhcp-end" required>
                </div>
                <div class="form-group">
                    <label>λ„¤νΈμ›ν¬ μΈν„°νμ΄μ¤:</label>
                    <input type="text" id="config-interface" required>
                </div>
                <div class="form-actions">
                    <button type="submit" class="primary-btn">μ„¤μ • μ €μ¥</button>
                    <button type="button" class="secondary-btn cancel-btn">μ·¨μ†</button>
                </div>
            </form>
        </div>
    </div>

    <!-- λ΅κ·Έ λ·°μ–΄ λ¨λ‹¬ -->
    <div id="log-modal" class="modal">
        <div class="modal-content large">
            <span class="close">&times;</span>
            <h2 id="log-title">μ„λΉ„μ¤ λ΅κ·Έ</h2>
            <div class="log-viewer" id="log-content"></div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>